{"ast":null,"code":"import _slicedToArray from\"C:/Users/Stephen/OneDrive/Desktop/New folder (13)/ProjectDissertation/quizzer/quizzer/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useContext}from'react';import{Link,useHistory}from'react-router-dom';import{UserContext}from'../utils/UserContext';import{loginUser,setAxiosAuthToken,setToken,getCurrentUser,unsetCurrentUser}from'../services/auth';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUserName=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useContext=useContext(UserContext),isAuth=_useContext.isAuth,setisAuth=_useContext.setisAuth;var history=useHistory();var handleSubmit=function handleSubmit(e){e.preventDefault();loginUser(username,password).then(function(response){var auth_token=response;setAxiosAuthToken(auth_token);setToken(auth_token);getCurrentUser();setisAuth(true);history.push(\"/\");}).catch(function(error){unsetCurrentUser();window.alert(\"Login Error \"+error);});};return/*#__PURE__*/_jsx(\"div\",{className:\"container pt-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-content\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"title is-3\",children:\"Quizzer\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"text\",placeholder:\"Username\",id:\"username\",name:\"username\",onChange:function onChange(e){return setUserName(e.target.value);}}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"material-icons\",children:\"person\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"control has-icons-left\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"password\",placeholder:\"Password\",id:\"password\",name:\"password\",onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"span\",{className:\"icon is-small is-left\",children:/*#__PURE__*/_jsx(\"i\",{className:\"material-icons\",children:\"lock\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"control\",children:/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"button is-success\",children:[\"Login\",/*#__PURE__*/_jsx(\"i\",{className:\"material-icons right\",children:\"send\"})]})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Don't have an account ? \",/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Register\"})]})]})]})]})})});}export default Login;","map":{"version":3,"sources":["C:/Users/Stephen/OneDrive/Desktop/New folder (13)/ProjectDissertation/quizzer/quizzer/frontend/src/components/auth/Login.js"],"names":["React","useState","useContext","Link","useHistory","UserContext","loginUser","setAxiosAuthToken","setToken","getCurrentUser","unsetCurrentUser","Login","username","setUserName","password","setPassword","isAuth","setisAuth","history","handleSubmit","e","preventDefault","then","response","auth_token","push","catch","error","window","alert","target","value"],"mappings":"oLAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,UAA1B,KAA4C,OAA5C,CACA,OAASC,IAAT,CAAeC,UAAf,KAAiC,kBAAjC,CAEA,OAASC,WAAT,KAA4B,sBAA5B,CACA,OAASC,SAAT,CAAoBC,iBAApB,CAAuCC,QAAvC,CAAiDC,cAAjD,CAAiEC,gBAAjE,KAAyF,kBAAzF,C,wFAEA,QAASC,CAAAA,KAAT,EAAiB,CAEb,cAAgCV,QAAQ,EAAxC,wCAAOW,QAAP,eAAiBC,WAAjB,eACA,eAAgCZ,QAAQ,EAAxC,yCAAOa,QAAP,eAAiBC,WAAjB,eACA,gBAA4Bb,UAAU,CAACG,WAAD,CAAtC,CAAOW,MAAP,aAAOA,MAAP,CAAeC,SAAf,aAAeA,SAAf,CAEA,GAAIC,CAAAA,OAAO,CAAGd,UAAU,EAAxB,CAEA,GAAMe,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,CAAD,CAAM,CACvBA,CAAC,CAACC,cAAF,GACAf,SAAS,CAACM,QAAD,CAAWE,QAAX,CAAT,CACCQ,IADD,CACM,SAAAC,QAAQ,CAAG,CACb,GAAMC,CAAAA,UAAU,CAAGD,QAAnB,CACAhB,iBAAiB,CAACiB,UAAD,CAAjB,CACAhB,QAAQ,CAACgB,UAAD,CAAR,CACAf,cAAc,GACdQ,SAAS,CAAC,IAAD,CAAT,CACAC,OAAO,CAACO,IAAR,CAAa,GAAb,EAEH,CATD,EAUCC,KAVD,CAUO,SAAAC,KAAK,CAAI,CACZjB,gBAAgB,GAChBkB,MAAM,CAACC,KAAP,CAAa,eAAiBF,KAA9B,EACH,CAbD,EAcH,CAhBD,CAkBA,mBACA,YAAK,SAAS,CAAC,gBAAf,uBACI,YAAK,SAAS,CAAC,MAAf,uBACA,aAAK,SAAS,CAAC,cAAf,wBACI,WAAI,SAAS,CAAC,YAAd,qBADJ,cAEI,cAAM,QAAQ,CAAER,YAAhB,wBACA,YAAK,SAAS,CAAC,OAAf,uBACA,WAAG,SAAS,CAAC,wBAAb,wBACI,cAAO,SAAS,CAAC,OAAjB,CACA,IAAI,CAAC,MADL,CAEA,WAAW,CAAC,UAFZ,CAGA,EAAE,CAAC,UAHH,CAIA,IAAI,CAAC,UAJL,CAKA,QAAQ,CAAE,kBAAAC,CAAC,QAAEP,CAAAA,WAAW,CAACO,CAAC,CAACU,MAAF,CAASC,KAAV,CAAb,EALX,EADJ,cAQA,aAAM,SAAS,CAAC,uBAAhB,uBACI,UAAG,SAAS,CAAC,gBAAb,oBADJ,EARA,GADA,EADA,cAeA,YAAK,SAAS,CAAC,OAAf,uBACA,WAAG,SAAS,CAAC,wBAAb,wBACI,cAAO,SAAS,CAAC,OAAjB,CACA,IAAI,CAAC,UADL,CAEA,WAAW,CAAC,UAFZ,CAGA,EAAE,CAAC,UAHH,CAIA,IAAI,CAAC,UAJL,CAKA,QAAQ,CAAE,kBAAAX,CAAC,QAAGL,CAAAA,WAAW,CAACK,CAAC,CAACU,MAAF,CAASC,KAAV,CAAd,EALX,EADJ,cAQI,aAAM,SAAS,CAAC,uBAAhB,uBACA,UAAG,SAAS,CAAC,gBAAb,kBADA,EARJ,GADA,EAfA,cA6BA,aAAK,SAAS,CAAC,OAAf,wBACA,UAAG,SAAS,CAAC,SAAb,uBACI,gBAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,mBAAhC,gCACI,UAAG,SAAS,CAAC,sBAAb,kBADJ,GADJ,EADA,cAMA,aANA,cAOA,6DAC2B,KAAC,IAAD,EAAM,EAAE,CAAC,WAAT,sBAD3B,GAPA,GA7BA,GAFJ,GADA,EADJ,EADA,CAkDH,CAED,cAAepB,CAAAA,KAAf","sourcesContent":["import React, { useState, useContext } from 'react'\r\nimport { Link, useHistory } from 'react-router-dom';\r\n\r\nimport { UserContext } from '../utils/UserContext';\r\nimport { loginUser, setAxiosAuthToken, setToken, getCurrentUser, unsetCurrentUser } from '../services/auth';\r\n\r\nfunction Login() {\r\n\r\n    const [username, setUserName] = useState();\r\n    const [password, setPassword] = useState();\r\n    const {isAuth, setisAuth} = useContext(UserContext);\r\n    \r\n    let history = useHistory();\r\n\r\n    const handleSubmit = (e)=> {\r\n        e.preventDefault();\r\n        loginUser(username, password)\r\n        .then(response =>{\r\n            const auth_token = response;\r\n            setAxiosAuthToken(auth_token);\r\n            setToken(auth_token);\r\n            getCurrentUser();\r\n            setisAuth(true);\r\n            history.push(\"/\");\r\n\r\n        })\r\n        .catch(error => {\r\n            unsetCurrentUser();\r\n            window.alert(\"Login Error \" + error);\r\n        });\r\n    };\r\n\r\n    return (\r\n    <div className=\"container pt-5\">\r\n        <div className=\"card\">\r\n        <div className=\"card-content\">\r\n            <h3 className=\"title is-3\">Quizzer</h3>\r\n            <form onSubmit={handleSubmit}>\r\n            <div className=\"field\">\r\n            <p className=\"control has-icons-left\">\r\n                <input className=\"input\" \r\n                type=\"text\" \r\n                placeholder=\"Username\"\r\n                id=\"username\"\r\n                name=\"username\"\r\n                onChange={e=>setUserName(e.target.value)}\r\n                />\r\n            <span className=\"icon is-small is-left\">\r\n                <i className=\"material-icons\">person</i>\r\n            </span>\r\n            </p>\r\n            </div>\r\n            <div className=\"field\">\r\n            <p className=\"control has-icons-left\">\r\n                <input className=\"input\" \r\n                type=\"password\" \r\n                placeholder=\"Password\" \r\n                id=\"password\"\r\n                name=\"password\"\r\n                onChange={e=> setPassword(e.target.value)}\r\n                />\r\n                <span className=\"icon is-small is-left\">\r\n                <i className=\"material-icons\">lock</i>\r\n                </span>\r\n            </p>\r\n            </div>\r\n            <div className=\"field\">\r\n            <p className=\"control\">\r\n                <button type=\"submit\" className=\"button is-success\">Login\r\n                    <i className=\"material-icons right\">send</i>\r\n                </button>\r\n            </p>\r\n            <br></br>\r\n            <p>\r\n               Don't have an account ? <Link to=\"/register\">Register</Link> \r\n            </p>\r\n            </div>\r\n            </form>\r\n        </div>\r\n        </div>\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default Login"]},"metadata":{},"sourceType":"module"}