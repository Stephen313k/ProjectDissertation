{"ast":null,"code":"import _slicedToArray from\"C:/Users/Stephen/OneDrive/Desktop/New folder (13)/ProjectDissertation/quizzer/quizzer/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useHistory}from'react-router-dom';import{getNotifications,postAcceptInvitation,deleteNotification}from'../services/notifications';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Notifications(){var history=useHistory();//states\nvar _useState=useState(),_useState2=_slicedToArray(_useState,2),notifications=_useState2[0],setNotifications=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),dataLoaded=_useState4[0],setdataLoaded=_useState4[1];//use effect hook\nuseEffect(function(){//get the token\nvar token=localStorage.getItem(\"token\");// call the function\ngetNotifications(token).then(function(response){//update the data\nsetNotifications(response);setdataLoaded(true);});},[]);//used in button to accept invitation\nvar handleAcceptInvitation=function handleAcceptInvitation(e){e.preventDefault();//get the token\nvar token=localStorage.getItem(\"token\");//and get the invitation id\npostAcceptInvitation(token,e.target.id).then(function(response){//remove the notification\ndocument.getElementById(e.target.id).parentNode.parentNode.style.display='none';});};//used in button to delete invitation\nvar handleDeleteNotification=function handleDeleteNotification(e){e.preventDefault();//get the token\ndeleteNotification(e.target.id).then(function(response){document.getElementById(e.target.id).parentNode.parentNode.style.display='none';});};if(dataLoaded===true){return/*#__PURE__*/_jsx(\"section\",{className:\"section\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"level-right\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){//directs to homepage\nhistory.push(\"/\");},className:\"delete\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:\"Notifications\"}),notifications.map(function(invi){return/*#__PURE__*/_jsxs(\"article\",{className:\"media\",children:[/*#__PURE__*/_jsx(\"figure\",{className:\"media-left\",children:/*#__PURE__*/_jsx(\"p\",{className:\"image is-64x64\",children:/*#__PURE__*/_jsx(\"img\",{className:\"is-rounded\",src:invi.from_user.profile.picture})})}),/*#__PURE__*/_jsx(\"div\",{className:\"media-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsxs(\"strong\",{children:[invi.from_user.first_name,\" \",invi.from_user.last_name]}),/*#__PURE__*/_jsxs(\"small\",{children:[\" @\",invi.from_user.username]}),/*#__PURE__*/_jsxs(\"p\",{children:[invi.notification_type===1?'Invited you to the server: ':'Wants to Join to the Server: ',\" \",/*#__PURE__*/_jsx(\"strong\",{children:invi.to_server.title})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttons\",children:[/*#__PURE__*/_jsx(\"button\",{id:invi.id,onClick:handleAcceptInvitation,className:\"button is-success\",children:\"Accept\"}),/*#__PURE__*/_jsx(\"button\",{id:invi.id,onClick:handleDeleteNotification,className:\"button is-danger\",children:\"Reject\"})]})]},invi.id);})]})]})})});}else{return/*#__PURE__*/_jsx(\"div\",{className:\"container is-max-desktop content is-large has-text-centered\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"notification is-primary\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"material-icons\",children:\"refresh\"}),/*#__PURE__*/_jsx(\"h5\",{className:\"title is-5\",children:\"You dont have any notifications to show..Thank you\"})]})});}}export default Notifications;","map":{"version":3,"sources":["C:/Users/Stephen/OneDrive/Desktop/New folder (13)/ProjectDissertation/quizzer/quizzer/frontend/src/components/layout/Notifications.js"],"names":["React","useState","useEffect","useHistory","getNotifications","postAcceptInvitation","deleteNotification","Notifications","history","notifications","setNotifications","dataLoaded","setdataLoaded","token","localStorage","getItem","then","response","handleAcceptInvitation","e","preventDefault","target","id","document","getElementById","parentNode","style","display","handleDeleteNotification","push","map","invi","from_user","profile","picture","first_name","last_name","username","notification_type","to_server","title"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { useHistory } from 'react-router-dom';\r\nimport { getNotifications, postAcceptInvitation, deleteNotification } from '../services/notifications';\r\n\r\nfunction Notifications() {\r\n\r\n    let history = useHistory();\r\n    //states\r\n    const [notifications, setNotifications] = useState();\r\n    const [dataLoaded, setdataLoaded] = useState(false);\r\n\r\n    //use effect hook\r\n    useEffect(() => {        \r\n        //get the token\r\n        const token = localStorage.getItem(\"token\");\r\n        // call the function\r\n        getNotifications(token)\r\n        .then(response => {\r\n            //update the data\r\n            setNotifications(response);\r\n            setdataLoaded(true);\r\n        })\r\n       },[]);\r\n    \r\n    //used in button to accept invitation\r\n    const handleAcceptInvitation = (e) => {\r\n        e.preventDefault();\r\n        //get the token\r\n        const token = localStorage.getItem(\"token\");\r\n        //and get the invitation id\r\n        postAcceptInvitation(token, e.target.id)\r\n        .then(response =>{\r\n            //remove the notification\r\n            document.getElementById(e.target.id).parentNode.parentNode.style.display='none';\r\n        })\r\n    };\r\n\r\n    //used in button to delete invitation\r\n    const handleDeleteNotification = (e) => {\r\n        e.preventDefault();\r\n        //get the token\r\n        deleteNotification(e.target.id)\r\n        .then(response =>{\r\n            document.getElementById(e.target.id).parentNode.parentNode.style.display='none';\r\n        })\r\n    };\r\n\r\n\r\nif (dataLoaded === true) {\r\nreturn (\r\n<section className=\"section\">\r\n    <div className=\"card\">\r\n        <div className=\"card-content\">\r\n            <div className=\"level-right\">\r\n                <button onClick={()=>{\r\n                    //directs to homepage\r\n                    history.push(\"/\")\r\n                }} className=\"delete\"></button>\r\n            </div>\r\n            <div className=\"content\">\r\n            <h1 className=\"title\">Notifications</h1>\r\n            {/* map out all notifications */}\r\n        {notifications.map(invi => (\r\n            <article key={invi.id} className=\"media\">\r\n            <figure className=\"media-left\">\r\n                <p className=\"image is-64x64\">        \r\n                      {/*User profile picture*/}\r\n                    <img className=\"is-rounded\" src={invi.from_user.profile.picture}/>\r\n                </p>\r\n            </figure>\r\n            <div className=\"media-content\">\r\n                <div className=\"content\">\r\n                    {/* user invitation*/}\r\n                    <strong>{invi.from_user.first_name} {invi.from_user.last_name}</strong><small> @{invi.from_user.username}</small>\r\n                    {/* if equals to one then invite to server else wants to join server */}\r\n                    <p>{invi.notification_type === 1 ? 'Invited you to the server: ' : 'Wants to Join to the Server: ' } <strong>{invi.to_server.title}</strong></p>\r\n                </div>\r\n            </div>\r\n\r\n            {/*Buttons to accept or delete an invitation*/}\r\n            <div className=\"buttons\">\r\n                <button id={invi.id} onClick={handleAcceptInvitation} className=\"button is-success\">Accept</button>\r\n                <button id={invi.id} onClick={handleDeleteNotification} className=\"button is-danger\">Reject</button>\r\n            </div>\r\n            </article>\r\n        ))}\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n</section>\r\n\r\n)\r\n\r\n} else {\r\n    return (\r\n         <div className=\"container is-max-desktop content is-large has-text-centered\">\r\n             <div className=\"notification is-primary\">\r\n                 <i className=\"material-icons\">refresh</i>\r\n                 <h5 className=\"title is-5\">You dont have any notifications to show..Thank you</h5>\r\n            </div>\r\n         </div>\r\n     )\r\n    }\r\n\r\n}\r\n\r\nexport default Notifications"]},"metadata":{},"sourceType":"module"}